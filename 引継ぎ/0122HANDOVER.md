# YatteMi! é–‹ç™ºå¼•ç¶™ãè³‡æ–™ v5.0

## æ¦‚è¦

YatteMi!ã¯å¤§å­¦ç”Ÿå‘ã‘ã®ã‚¹ã‚­ãƒ«ã‚·ã‚§ã‚¢ãƒªãƒ³ã‚°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€‚

- **URL**: https://yattemi.vercel.app
- **GitHub**: https://github.com/ohkita8128/yattemi
- **Supabase**: https://lbdrqjhifussacjgwnij.supabase.co

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: Next.js 14 (App Router), TypeScript, Tailwind CSS
- **UI**: shadcn/ui, Lucide Icons
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Supabase (PostgreSQL, Auth, Realtime, Storage)
- **ãƒ‡ãƒ—ãƒ­ã‚¤**: Vercel

---

## é‡è¦: ã‚ˆãç™ºç”Ÿã™ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦æ³•

### 1. æœªä½¿ç”¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼
```
Type error: 'XXX' is declared but its value is never read.
```
**å¯¾å‡¦**: ä½¿ã£ã¦ãªã„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’å‰Šé™¤
```powershell
(Get-Content "ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹" -Encoding UTF8 -Raw) -replace "  XXX,\r?\n", "" | Set-Content "ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹" -Encoding UTF8 -NoNewline
```

### 2. null vs undefined å‹ã‚¨ãƒ©ãƒ¼
```
Type 'string | null' is not assignable to type 'string | undefined'.
```
**å¯¾å‡¦**: å‹å®šç¾©ã‚’ `string | null` ã«å¤‰æ›´ã™ã‚‹ã‹ã€`?? undefined` ã§å¤‰æ›

### 3. Supabaseå‹ã‚¨ãƒ©ãƒ¼
```
Argument of type 'any' is not assignable to parameter of type 'never'.
```
**å¯¾å‡¦**: `(supabase as any)` ã§ã‚­ãƒ£ã‚¹ãƒˆ

### 4. PowerShellã®ãƒ‘ã‚¹å•é¡Œï¼ˆ[id]ãƒ•ã‚©ãƒ«ãƒ€ï¼‰
```powershell
# âŒ é€šå¸¸ã®ãƒ‘ã‚¹ã¯å‹•ã‹ãªã„
Get-Content "$HOME\yatte-mi\src\app\(main)\posts\[id]\page.tsx"

# âœ… -LiteralPath ã‚’ä½¿ã†
Get-Content -LiteralPath "$HOME\yatte-mi\src\app\(main)\posts\[id]\page.tsx" -Encoding UTF8
```

### 5. Set ã®ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰
```
Type 'Set<string>' can only be iterated through...
```
**å¯¾å‡¦**: `[...new Set(arr)]` â†’ `Array.from(new Set(arr))`

### 6. é…åˆ—ã‚¢ã‚¯ã‚»ã‚¹æ™‚ã® undefined
```
Argument of type 'string | undefined' is not assignable...
```
**å¯¾å‡¦**: `arr[0]` â†’ `arr[0]!` (non-null assertion)

### 7. Recordå‹ã®ã‚­ãƒ¼ã‚¢ã‚¯ã‚»ã‚¹
```
'OBJECT.key' is possibly 'undefined'.
```
**å¯¾å‡¦**: `OBJECT.key` â†’ `OBJECT['key'] || []`

---

## ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### äº‹å‰ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼é˜²æ­¢ï¼‰
ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆæ™‚ã«ä»¥ä¸‹ã‚’ç¢ºèªï¼š
1. ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¯å…¨ã¦ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹
2. å‹ã¯ `null` ã¨ `undefined` ã‚’æ­£ã—ãæ‰±ã£ã¦ã„ã‚‹ã‹
3. Supabaseã‚¯ã‚¨ãƒªã¯ `(supabase as any)` ã§ã‚­ãƒ£ã‚¹ãƒˆã—ã¦ã„ã‚‹ã‹

### PowerShellã§ã®ç½®æ›
```powershell
# å˜ç´”ãªç½®æ›
(Get-Content "ãƒ•ã‚¡ã‚¤ãƒ«" -Encoding UTF8 -Raw) -replace "å¤ã„", "æ–°ã—ã„" | Set-Content "ãƒ•ã‚¡ã‚¤ãƒ«" -Encoding UTF8 -NoNewline

# è¤‡æ•°è¡Œã®å‰Šé™¤ï¼ˆ\r?\n ã§æ”¹è¡Œã«å¯¾å¿œï¼‰
-replace "å‰Šé™¤ã—ãŸã„è¡Œ\r?\n", ""
```

---

## ç¾åœ¨ã®DBæ§‹é€ 

### ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«
| ãƒ†ãƒ¼ãƒ–ãƒ« | èª¬æ˜ |
|----------|------|
| profiles | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« |
| posts | æŠ•ç¨¿ï¼ˆteach/learnï¼‰ |
| applications | å¿œå‹Ÿ |
| matches | ãƒãƒƒãƒãƒ³ã‚° |
| messages | ãƒãƒ£ãƒƒãƒˆ |
| likes | ã„ã„ã­ |
| follows | ãƒ•ã‚©ãƒ­ãƒ¼ |
| reviews | ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»ãƒãƒƒã‚¸ |
| notifications | é€šçŸ¥ |
| categories | ã‚«ãƒ†ã‚´ãƒª |

### æœ€è¿‘è¿½åŠ ã—ãŸã‚«ãƒ©ãƒ ï¼ˆpostsï¼‰
```sql
available_days TEXT[]      -- ['mon','tue','sat']
available_times TEXT[]     -- ['morning','afternoon','evening']
specific_dates JSONB       -- [{date, start, end}]
my_level INT
target_level_min INT
target_level_max INT
tags TEXT[]
```

### profilesã«è¿½åŠ ã—ãŸã‚«ãƒ©ãƒ 
```sql
is_public BOOLEAN
```

---

## å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

| æ©Ÿèƒ½ | çŠ¶æ…‹ | å‚™è€ƒ |
|------|------|------|
| èªè¨¼ï¼ˆãƒ­ã‚°ã‚¤ãƒ³/ç™»éŒ²ï¼‰ | âœ… | Supabase Auth |
| æŠ•ç¨¿CRUD | âœ… | ã‚¿ã‚°ãƒ»æ—¥ç¨‹å¯¾å¿œ |
| å¿œå‹Ÿãƒ»ãƒãƒƒãƒãƒ³ã‚° | âœ… | |
| ãƒãƒ£ãƒƒãƒˆ | âœ… | Realtime |
| ã„ã„ã­ | âœ… | ç„¡é™ãƒ«ãƒ¼ãƒ—ä¿®æ­£æ¸ˆ |
| ãƒ•ã‚©ãƒ­ãƒ¼ | âœ… | |
| ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»ãƒãƒƒã‚¸ | âœ… | |
| é€šçŸ¥ | âœ… | |
| ã‚¢ãƒã‚¿ãƒ¼ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ | âœ… | Supabase Storage |
| ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | âœ… | /dashboard |
| ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ä¸€è¦§ | âœ… | /users/[username]/follows |
| ãƒ¬ãƒ™ãƒ«ã‚·ã‚¹ãƒ†ãƒ  | âœ… | 0-10ã€çµµæ–‡å­—è¡¨ç¤º |
| ã‚¿ã‚°å…¥åŠ›ï¼ˆã‚µã‚¸ã‚§ã‚¹ãƒˆï¼‰ | âœ… | |
| æ—¥ç¨‹é¸æŠï¼ˆæ›œæ—¥ãƒ»æ™‚é–“å¸¯ãƒ»å…·ä½“æ—¥æ™‚ï¼‰ | âœ… | |
| æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆãƒ¬ãƒ™ãƒ«ï¼‰ | âœ… | |
| æŠ•ç¨¿è€…è¡¨ç¤ºï¼ˆã‚«ãƒ¼ãƒ‰ä¸Šéƒ¨ï¼‰ | âœ… | |

---

## æœªå®Ÿè£…ãƒ»TODO

| æ©Ÿèƒ½ | å„ªå…ˆåº¦ | å‚™è€ƒ |
|------|--------|------|
| ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸè¤‡æ•°æš | é«˜ | profile_imagesãƒ†ãƒ¼ãƒ–ãƒ«å¿…è¦ |
| ã‚¿ã‚°ã§æ¤œç´¢ | é«˜ | exploreã«è¿½åŠ  |
| æ›œæ—¥ãƒ»æ™‚é–“å¸¯ãƒ•ã‚£ãƒ«ã‚¿ | ä¸­ | exploreã«è¿½åŠ  |
| ã‚ªãƒ³ãƒ©ã‚¤ãƒ³/å¯¾é¢ãƒ•ã‚£ãƒ«ã‚¿ | ä¸­ | exploreã«è¿½åŠ  |
| é€šçŸ¥ã®è‡ªå‹•ç”Ÿæˆ | ä¸­ | DBãƒˆãƒªã‚¬ãƒ¼ |
| å…¬é–‹ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å……å®Ÿ | ä¸­ | æŠ•ç¨¿ä¸€è¦§ã€ãƒãƒƒã‚¸è¡¨ç¤º |
| PWAå¯¾å¿œ | ä½ | |

---

## ãƒšãƒ¼ã‚¸æ§‹æˆ

| ãƒ‘ã‚¹ | èª¬æ˜ | èªè¨¼ |
|------|------|------|
| / | ãƒ›ãƒ¼ãƒ  | ä¸è¦ |
| /explore | æŠ•ç¨¿ä¸€è¦§ãƒ»æ¤œç´¢ | ä¸è¦ |
| /posts/[id] | æŠ•ç¨¿è©³ç´° | ä¸è¦ |
| /posts/new | æ–°è¦æŠ•ç¨¿ | å¿…è¦ |
| /posts/[id]/edit | æŠ•ç¨¿ç·¨é›† | å¿…è¦ |
| /users/[username] | å…¬é–‹ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« | ä¸è¦ |
| /users/[username]/follows | ãƒ•ã‚©ãƒ­ãƒ¼ä¸€è¦§ | ä¸è¦ |
| /profile | è‡ªåˆ†ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ | å¿…è¦ |
| /profile/edit | ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›† | å¿…è¦ |
| /dashboard | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ | å¿…è¦ |
| /applications | å¿œå‹Ÿç®¡ç† | å¿…è¦ |
| /teach | ãƒ†ã‚£ãƒ¼ãƒä¸€è¦§ | å¿…è¦ |
| /challenges | ãƒãƒ£ãƒ¬ãƒ³ã‚¸ä¸€è¦§ | å¿…è¦ |
| /notifications | é€šçŸ¥ä¸€è¦§ | å¿…è¦ |
| /login | ãƒ­ã‚°ã‚¤ãƒ³ | ä¸è¦ |
| /register | æ–°è¦ç™»éŒ² | ä¸è¦ |

---

## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ

```
src/components/
â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ skeleton.tsx
â”‚   â”œâ”€â”€ level-slider.tsx      # ãƒ¬ãƒ™ãƒ«é¸æŠï¼ˆãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ¬ãƒ³ã‚¸å¯¾å¿œï¼‰
â”‚   â”œâ”€â”€ tag-input.tsx         # ã‚¿ã‚°å…¥åŠ›ï¼ˆã‚µã‚¸ã‚§ã‚¹ãƒˆä»˜ãï¼‰
â”‚   â””â”€â”€ schedule-selector.tsx # æ—¥ç¨‹é¸æŠï¼ˆæ›œæ—¥ãƒ»æ™‚é–“å¸¯ãƒ»å…·ä½“æ—¥æ™‚ï¼‰
â”œâ”€â”€ posts/
â”‚   â”œâ”€â”€ post-card.tsx         # æŠ•ç¨¿ã‚«ãƒ¼ãƒ‰ï¼ˆæŠ•ç¨¿è€…ä¸Šéƒ¨è¡¨ç¤ºï¼‰
â”‚   â”œâ”€â”€ post-form.tsx
â”‚   â””â”€â”€ ...
â”œâ”€â”€ applications/
â”œâ”€â”€ reviews/
â””â”€â”€ ...
```

---

## ãƒ•ãƒƒã‚¯ä¸€è¦§

| ãƒ•ãƒƒã‚¯ | èª¬æ˜ | æ³¨æ„ç‚¹ |
|--------|------|--------|
| useAuth | èªè¨¼çŠ¶æ…‹ç®¡ç† | |
| usePosts | æŠ•ç¨¿CRUD | supabaseRefä½¿ç”¨ |
| usePost | å˜ä¸€æŠ•ç¨¿å–å¾— | é–²è¦§æ•°ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ãƒˆ1å›ã®ã¿ |
| useLikes | ã„ã„ã­æ©Ÿèƒ½ | hasFetchedã§ç„¡é™ãƒ«ãƒ¼ãƒ—é˜²æ­¢ |
| useApplications | å¿œå‹Ÿç®¡ç† | |
| useMessages | ãƒãƒ£ãƒƒãƒˆï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰ | |
| useReviews | ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»ãƒãƒƒã‚¸ | |
| useFollow | ãƒ•ã‚©ãƒ­ãƒ¼æ©Ÿèƒ½ | |
| useCategories | ã‚«ãƒ†ã‚´ãƒªå–å¾— | |
| useDebounce | ãƒ‡ãƒã‚¦ãƒ³ã‚¹ | |

---

## ç„¡é™ãƒ«ãƒ¼ãƒ—é˜²æ­¢ãƒ‘ã‚¿ãƒ¼ãƒ³

```typescript
// âŒ NG: supabaseãŒæ¯å›æ–°è¦ä½œæˆã•ã‚Œã‚‹
const supabase = getClient();
useEffect(() => {
  // ...
}, [supabase]); // ç„¡é™ãƒ«ãƒ¼ãƒ—ï¼

// âœ… OK: useRefã§å®‰å®šåŒ–
const supabaseRef = useRef(getClient());
const hasFetched = useRef(false);

useEffect(() => {
  if (hasFetched.current) return;
  const supabase = supabaseRef.current;
  // ...
  hasFetched.current = true;
}, [ä¾å­˜é…åˆ—ã‹ã‚‰supabaseã‚’é™¤å¤–]);
```

---

## ã‚«ãƒ†ã‚´ãƒªä¸€è¦§ï¼ˆ2026/01/22æ™‚ç‚¹ï¼‰

| ID | åå‰ | slug |
|----|------|------|
| 1 | ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° | programming |
| 2 | ãƒ‡ã‚¶ã‚¤ãƒ³ | design |
| 3 | éŸ³æ¥½ | music |
| 4 | ã‚¹ãƒãƒ¼ãƒ„ | sports |
| 5 | èªå­¦ | language |
| 6 | æ–™ç† | cooking |
| 7 | å†™çœŸãƒ»å‹•ç”» | media |
| 8 | ãƒ“ã‚¸ãƒã‚¹ | business |
| 9 | ã‚¢ãƒ¼ãƒˆ | art |
| 10 | ã‚²ãƒ¼ãƒ  | gaming |
| 12 | å‹‰å¼· | study |
| 13 | ç¾å®¹ãƒ»ã‚³ã‚¹ãƒ¡ | beauty |
| 14 | ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ | fashion |
| 15 | è³‡æ ¼ãƒ»å°±æ´» | career |
| 16 | ä¼çµ±ãƒ»æ–‡åŒ– | traditional |
| 17 | ç”Ÿæ´» | lifestyle |
| 11 | ãã®ä»– | other |

---

## ãƒ¬ãƒ™ãƒ«ã‚·ã‚¹ãƒ†ãƒ 

| ãƒ¬ãƒ™ãƒ« | åå‰ | çµµæ–‡å­— |
|--------|------|--------|
| 0-1 | è¦‹ç¿’ã„ | ğŸ£ |
| 2-3 | åˆå¿ƒè€… | ğŸŒ± |
| 4-5 | ä¸­ç´šè€… | ğŸ“š |
| 6-7 | ä¸€äººå‰ | ğŸš¶ |
| 8-9 | è·äºº | ğŸ”¨ |
| 10 | é”äºº | ğŸ¥· |

---

## ãƒãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ 

### å…ˆè¼©ã«é€ã‚‹ãƒãƒƒã‚¸ï¼ˆå¾Œè¼©ãŒé¸ã¶ï¼‰
- ğŸ“ ã‚ã‹ã‚Šã‚„ã™ã„ï¼ (clear)
- ğŸ’¡ ãŸã‚ã«ãªã£ãŸï¼ (helpful)
- ğŸŒŸ ç¥å…ˆè¼©ï¼ (godsenpai)

### å¾Œè¼©ã«é€ã‚‹ãƒãƒƒã‚¸ï¼ˆå…ˆè¼©ãŒé¸ã¶ï¼‰
- ğŸ”¥ ç†±å¿ƒã ã£ãŸï¼ (eager)
- âœ¨ ã®ã¿ã“ã¿æ—©ã„ï¼ (quicklearner)
- ğŸ’ª ãŒã‚“ã°ã‚Šå±‹ï¼ (hardworker)

### å…±é€šãƒãƒƒã‚¸
- ğŸ‘ æœ€é«˜ã ã£ãŸï¼ (awesome)
- ğŸ’– ã‚ã‚ŠãŒã¨ã†ï¼ (thanks)
- ğŸ¤ ã¾ãŸä¼šã„ãŸã„ï¼ (again)

---

## é–‹ç™ºã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# ãƒ“ãƒ«ãƒ‰ï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«å¿…ãšå®Ÿè¡Œï¼‰
npm run build

# ãƒ‡ãƒ—ãƒ­ã‚¤
git add .
git commit -m "ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"
git push
```

---

## æ¬¡ã«ã‚„ã‚‹ã“ã¨

1. **ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å†™çœŸè¤‡æ•°æš**
   - `profile_images` ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
   - Supabase Storageã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
   - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†UIã«ã‚®ãƒ£ãƒ©ãƒªãƒ¼è¿½åŠ 
   - å…¬é–‹ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã§ã‚¹ãƒ¯ã‚¤ãƒ—è¡¨ç¤º

2. **æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿å¼·åŒ–**
   - ã‚¿ã‚°æ¤œç´¢
   - æ›œæ—¥ãƒ»æ™‚é–“å¸¯ãƒ•ã‚£ãƒ«ã‚¿
   - ã‚ªãƒ³ãƒ©ã‚¤ãƒ³/å¯¾é¢ãƒ•ã‚£ãƒ«ã‚¿

3. **å…¬é–‹ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å……å®Ÿ**
   - æŠ•ç¨¿ä¸€è¦§è¡¨ç¤º
   - å—ã‘å–ã£ãŸãƒãƒƒã‚¸è¡¨ç¤º
   - SNSãƒªãƒ³ã‚¯è¡¨ç¤º

---

æœ€çµ‚æ›´æ–°: 2026/01/22
